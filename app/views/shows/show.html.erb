<section id="show">
<div class="container">
<div class="row">
  <div class="col-xs-12 text-center">
    <h1>
      <%= @show.show_at.to_time.strftime('%B %e') %> at <%= link_to "#{@show.board.name}", @show.board %></h1>
    </h1>
    <br>
    <h2>
      <% @show.acts.each do |a| %>
        <%= link_to a.name.to_s, a %>
        <% if a != @show.acts.last %>
          -
        <% end %>          
      <% end %>
    </h2>
      <br>
      
    <h3>
      Doors <%= @show.door_at.to_time.in_time_zone(@show.board.timezone).strftime('%l:%M %p') %> - Show <%= @show.show_at.to_time.in_time_zone(@show.board.timezone).strftime('%l:%M %p') %>
    </h3>

    <h3>
      <% if @show.price_adv != @show.price_door %>
        <%= number_to_currency(@show.price_adv, unit:"$", :precision => 0) %> advance - <%= number_to_currency(@show.price_door, unit:"$", :precision => 0) %> at the door
      <% else %>
        <%= number_to_currency(@show.price_adv, unit:"$", :precision => 0) %> 
      <% end %>

    </h3>
    <br>
    <% if user_signed_in? %>

    <% end %>
    <br>

    <% if @show.ticketing_type == "Ticketed" || @show.ticketing_type == "paid" %>
      <%= render 'reserve_tickets_button' %>
    <% else %>
      This show is free!
    <% end %>

    <% if user_signed_in? && current_user.boarder?(@show.board) && current_user.board_role(@show.board) == "owner" %>
      <p>
        <br>
        <br>
        <%= link_to "Edit show", edit_board_show_path(@board, @show) %>
      </p>
    <% end %>
  </div>
  </div>
</div>
</section>
<script>
  $(function() {
    var reservePriceUpdate = function() {
      var reservePrice = 0
      var btnString = ""

      reservePrice = parseInt($('.ticket-reserve').val() * <%= @show.price_adv %>)

      btnString = "$" + reservePrice.toString() + " Proceed to Checkout"
      $('.btn-reserve').val(btnString)
    }
    reservePriceUpdate();

    $('.ticket-reserve').change(function() {
      reservePriceUpdate();
    })
  });
</script>